import _ from 'lodash'
import w from 'wsemi'
import interp2Kriging from './src/interp2Kriging.mjs'


let ps
let p
let r

ps = [{ x: 243, y: 206, z: 95 }, { x: 233, y: 225, z: 146 }, { x: 21, y: 325, z: 22 }, { x: 953, y: 28, z: 223 }, { x: 1092, y: 290, z: 39 }, { x: 744, y: 200, z: 191 }, { x: 174, y: 3, z: 22 }, { x: 537, y: 368, z: 249 }, { x: 1151, y: 371, z: 86 }, { x: 814, y: 252, z: 125 }]
p = {
    x: 243,
    y: 205,
}
r = interp2Kriging(ps, p)
console.log(r)
// => { x: 243, y: 205, z: 94.88479948418727 }

ps = [{ x: 243, y: 206, z: 95 }, { x: 233, y: 225, z: 146 }, { x: 21, y: 325, z: 22 }, { x: 953, y: 28, z: 223 }, { x: 1092, y: 290, z: 39 }, { x: 744, y: 200, z: 191 }, { x: 174, y: 3, z: 22 }, { x: 537, y: 368, z: 249 }, { x: 1151, y: 371, z: 86 }, { x: 814, y: 252, z: 125 }]
p = {
    x: 283,
    y: 205,
}
r = interp2Kriging(ps, p)
console.log(r)
// => { x: 283, y: 205, z: 116.32333499687815 }

ps = [{ x: 243, y: 206, z: 95 }, { x: 233, y: 225, z: 146 }, { x: 21, y: 325, z: 22 }, { x: 953, y: 28, z: 223 }, { x: 1092, y: 290, z: 39 }, { x: 744, y: 200, z: 191 }, { x: 174, y: 3, z: 22 }, { x: 537, y: 368, z: 249 }, { x: 1151, y: 371, z: 86 }, { x: 814, y: 252, z: 125 }]
p = {
    x: 1160,
    y: 380,
}
r = interp2Kriging(ps, p)
console.log(r)
// => { x: 1160, y: 380, z: 87.27045807621896 }

ps = [{ a: 243, b: 206, c: 95 }, { a: 233, b: 225, c: 146 }, { a: 21, b: 325, c: 22 }, { a: 953, b: 28, c: 223 }, { a: 1092, b: 290, c: 39 }, { a: 744, b: 200, c: 191 }, { a: 174, b: 3, c: 22 }, { a: 537, b: 368, c: 249 }, { a: 1151, b: 371, c: 86 }, { a: 814, b: 252, c: 125 }]
p = {
    a: 243,
    b: 205,
}
r = interp2Kriging(ps, p, { keyX: 'a', keyY: 'b', keyZ: 'c' })
console.log(r)
// => { a: 243, b: 205, c: 94.88479948418727 }

ps = [{ x: 243, y: 206, z: 95 }, { x: 233, y: 225, z: 146 }, { x: 21, y: 325, z: 22 }, { x: 953, y: 28, z: 223 }, { x: 1092, y: 290, z: 39 }, { x: 744, y: 200, z: 191 }, { x: 174, y: 3, z: 22 }, { x: 537, y: 368, z: 249 }, { x: 1151, y: 371, z: 86 }, { x: 814, y: 252, z: 125 }]
p = [
    {
        x: 243,
        y: 205,
    },
    {
        x: 283,
        y: 205,
    },
]
r = interp2Kriging(ps, p)
console.log(r)
// => [
//   { x: 243, y: 205, z: 94.88479948418727 },
//   { x: 283, y: 205, z: 116.32333499687815 }
// ]

ps = [{ x: 243, y: 206, z: 95 }, { x: 233, y: 225, z: 146 }, { x: 21, y: 325, z: 22 }, { x: 953, y: 28, z: 223 }, { x: 1092, y: 290, z: 39 }, { x: 744, y: 200, z: 191 }, { x: 174, y: 3, z: 22 }, { x: 537, y: 368, z: 249 }, { x: 1151, y: 371, z: 86 }, { x: 814, y: 252, z: 125 }]
p = {
    x: 243,
    y: 205,
}
r = interp2Kriging(ps, p, { model: 'gaussian' })
console.log(r)
// => { x: 243, y: 205, z: 92.39124140708736 }

ps = [{ x: 243, y: 206, z: 95 }, { x: 233, y: 225, z: 146 }, { x: 21, y: 325, z: 22 }, { x: 953, y: 28, z: 223 }, { x: 1092, y: 290, z: 39 }, { x: 744, y: 200, z: 191 }, { x: 174, y: 3, z: 22 }, { x: 537, y: 368, z: 249 }, { x: 1151, y: 371, z: 86 }, { x: 814, y: 252, z: 125 }]
p = {
    x: 243,
    y: 205,
}
r = interp2Kriging(ps, p, { sigma2: 0.001, alpha: 70 })
console.log(r)
// => { x: 243, y: 205, z: 90.88702949276379 }

ps = [{ x: 243, y: 206, z: 95 }, { x: 233, y: 225, z: 146 }, { x: 21, y: 325, z: 22 }, { x: 953, y: 28, z: 223 }, { x: 1092, y: 290, z: 39 }, { x: 744, y: 200, z: 191 }, { x: 174, y: 3, z: 22 }, { x: 537, y: 368, z: 249 }, { x: 1151, y: 371, z: 86 }, { x: 814, y: 252, z: 125 }]
p = {
    x: 243,
    y: 205,
}
r = interp2Kriging(ps, p, { returnWithVariogram: true })
console.log(r)
// => {
//   result: { x: 243, y: 205, z: 94.88479948418727 },
//   variogram: {
//     t: [
//       0.32158590308370044,
//       0.5462555066079295,
//       0,
//       0.8854625550660793,
//       0.07488986784140969,
//       0.7444933920704846,
//       0,
//       1,
//       0.28193832599118945,
//       0.45374449339207046
//     ],
//     x: [
//       0.20905923344947736,
//       0.20034843205574912,
//       0.0156794425087108,
//       0.8275261324041812,
//       0.9486062717770035,
//       0.6454703832752613,
//       0.1489547038327526,
//       0.4651567944250871,
//       1,
//       0.7064459930313589
//     ],
//     y: [
//       0.17682926829268292,
//       0.19337979094076654,
//       0.2804878048780488,
//       0.02177700348432056,
//       0.25,
//       0.171602787456446,
//       0,
//       0.31794425087108014,
//       0.3205574912891986,
//       0.21689895470383275
//     ],
//     nugget: 0.3352853492342814,
//     range: 0.9664329138202223,
//     sill: 0.45652675432516066,
//     A: 0.3333333333333333,
//     n: 10,
//     model: [Function: kriging_variogram_exponential],
//     svpd: { data: [Array], bars: [Array] },
//     K: [
//          -75.85170041752461,     67.92572292348414, -0.16335841036969692,
//         0.24131518978271652,  -0.04234246865054588,   0.8770518396329141,
//           5.616960362170287,     1.621659637440229,  0.02788800165194478,
//        -0.21415853416653916,     67.92572292348414,   -75.61786478824882,
//           5.413232079727116,  0.049069434383856164,  0.03679113229352314,
//        -0.11847139352699987,    0.3142012767297748,   1.9531078854429942,
//         0.14216377854052373, -0.026503104672520067,  -0.1633584103696629,
//           5.413232079727084,   -10.341088741602485,   0.7076902564152013,
//          0.2717259477481396, -0.032751338327812955,   2.4021510467734464,
//          1.1039529303205011,    0.9343241199626735,  0.17593910677198668,
//          0.2413151897827085,   0.04906943438386374,   0.7076902564152016,
//         -11.195895809332823,    3.6318326767168245,      3.0935386508887,
//           1.045155349956814,   0.07681115159025333,   0.5500520981253356,
//           2.176928207710061,  -0.04234246865058671,  0.03679113229356136,
//         0.27172594774814596,     3.631832676716827,   -21.83399183339756,
//        -0.37035445670314004,    0.1631940797086947,  0.14784852853020494,
//          14.592661153646377,    3.5296407596609107,   0.8770518396328766,
//        -0.11847139352696667,  -0.03275133832781456,    3.093538650888696,
//        -0.37035445670313066,   -23.428385057803684,   0.8346909075985001,
//           3.683800415485762,  -0.07094528659970148,   15.630834782735695,
//           5.616960362170222,    0.3142012767298379,   2.4021510467734473,
//          1.0451553499568167,   0.16319407970869468,   0.8346909075984896,
//          -11.15967643574728,   0.47980505727624445,   0.7525119639869366,
//        -0.03990202162613798,    1.6216596374402723,   1.9531078854429453,
//          1.1039529303205011,   0.07681115159025047,  0.14784852853020047,
//           3.683800415485773,    0.4798050572762466,  -11.594555930753838,
//          0.9237284214140162,    1.8947859772223594,  0.02788800165198713,
//         0.14216377854048556,    0.9343241199626655,   0.5500520981253338,
//          14.592661153646382,  -0.07094528659970313,   0.7525119639869372,
//          0.9237284214140105,   -18.251230245653346,   0.8379596933918424,
//         -0.2141585341665283, -0.026503104672522343,  0.17593910677198843,
//          2.1769282077100636,      3.52964075966091,   15.630834782735695,
//       -0.039902021626148254,    1.8947859772223656,   0.8379596933918344,
//          -23.89204017145281
//     ],
//     M: [
//       15.107775528173876,
//       -17.523553164024435,
//       4.974279767668836,
//       -6.014370838628366,
//       7.175095294789429,
//       -3.7572657339807423,
//       4.210920521157789,
//       -6.064323143863025,
//       -2.228072445295278,
//       5.035785385549147
//     ]
//   }
// }


//node --experimental-modules --es-module-specifier-resolution=node g.mjs

